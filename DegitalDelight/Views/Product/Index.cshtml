@model DegitalDelight.Models.Product

@{
    ViewData["Title"] = "PRODUCT";
}

<style>
    /* Custom styles for better spacing */
    .product-details {
        margin-top: 0px;
        margin-bottom: 20px;
    }

        .product-details p {
            margin-top: 1em; /* Adjust as needed */
            margin-bottom: 1em;
            font-size: 2em; /* Adjust as needed */
        }

    h2 {
        font-size: 3em; /* Adjust as needed */
    }
    /* Additional styles for quantity and total section */
    .quantity-section {
        margin-top: 2em; /* Adjust as needed */
    }

    .total-section {
        margin-top: 2em; /* Adjust as needed */
    }
    /* Button style */
    button {
        font-size: 1.5em; /* Adjust as needed */
        background-color: #007BFF; /* Màu xanh dương */
        color: #fff; /* Chữ trắng */
        padding: 10px 20px; /* Điều chỉnh theo nhu cầu */
        border: none;
        cursor: pointer;
    }
</style>
<div style="display: flex; align-items: flex-start; justify-content: center;">
    <!-- Left half for the image -->
    <div style="flex: 1;">
        <img src="@Model.Picture" alt="Product Image" style="max-width: 100%; max-height: 900px;">
    </div>

    <!-- Right half for product details -->
    <div style="flex: 1; padding: 3em;">
        <h2>@Model.Name</h2>

        <!-- Horizontal line below the product name -->
        <hr style="border-top: 1px solid #ccc; margin: 1em 0;">

        <!-- Product details with added spacing between properties -->
        <div class="product-details">
            <p>@Model.Description</p>
            <p>Giá: @Model.Price</p>
            <!-- Add any other product details you want to display -->
        </div>

        <!-- Quantity selection box -->
        <div class="quantity-section">
            <label for="quantity">Số lượng:</label>
            <select id="quantity" name="quantity">
                <option value="1">1</option>
                <option value="2">2</option>
                <!-- Add more options as needed -->
            </select>
        </div>

        <!-- Total section -->
        <div class="total-section">
            <p>Total: <span id="totalAmount">0</span></p>
        </div>

        <!-- Add to Cart button -->
        <button onclick="addToCart('@Model.Id', '@Model.Name', '@Model.Price')">Add to Cart</button>
    </div>
</div>

<script>
    // JavaScript to update the total amount based on the selected quantity
    document.getElementById('quantity').addEventListener('change', function () {
        updateTotalAmount();
    });
    // Function to add the product to the cart
    function addToCart(productId, productName, productPrice) {
        var quantity = parseInt(document.getElementById('quantity').value);
        var totalAmount = quantity * parseFloat(productPrice);
        alert('Added ' + quantity + ' item(s) of product ' + productName + ' to the cart. Total: ' + totalAmount.toFixed(2));
        $.ajax({
            type: "POST",
            url: "Cart/AddItemToCart",
            data: { productId: productId },
            success: function (msg) {
                window.location = "Cart/Index";
            }
        });
        
    }
    // Function to update the total amount
    function updateTotalAmount() {
        var quantity = parseInt(document.getElementById('quantity').value);
        var price = parseFloat('@Model.Price');
        var totalAmount = quantity * price;
        document.getElementById('totalAmount').innerText = totalAmount.toFixed(2);
    }
    // Initial update of the total amount
    updateTotalAmount();
</script>
